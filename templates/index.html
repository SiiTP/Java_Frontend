<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Test</title>
    <script src="js/lib/require.js"></script>

</head>
<body>
<div id="page"></div>
    <script>
        define('input', function() {
            var View = Backbone.View.extend({
                tagName: 'input',
                events: {
                    'keypress' : 'onChange'
                },
                initialize: function() {
                    _.bindAll(this, 'onChange');
                },
                onChange: function() {
                    var str = "peremennaya";
                    this.trigger('change', this.el.value);
                    console.log("in input onChange. this.el.value is (" + this.el.value + ")");
                }
            });
            return View;
        });
        define('form', ['input'], function(Input) {
            var View = Backbone.View.extend({
                el: 'div',
                initialize: function() {
                    _.bindAll(this, 'render');
                    this.el.innerHTML = '<span class="js-text"></span>';
                    this.input = new Input();
                    this.input.on('change', this.render);
                    this.el.appendChild(this.input.el);
                    this.el.appendChild(this.input.el);
                },

                render: function(value) {
                    this.$el.find('.js-text').html(value);
                    console.log("in form render. Value is (" + value + ");");
                }
            });
            return View;
        });

        require(['form'], function(form) {
            new form({
                el : "#page"
            });
        });
        console.log("in the end");
    </script>
</body>
</html>